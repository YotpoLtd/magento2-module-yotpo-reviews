<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->
<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
<actionGroup name="EnableYotpoPlugin">
  <!-- close general menu which is opned by default-->
  <click selector="{{AdminLoginToYotpo.GeneralMenu}}" stepKey="ClickOnGeneralMenu"/>
  <waitForPageLoad stepKey="waitForClickOnGeneralMenu"/>

  <seeElementInDOM selector="{{AdminLoginToYotpo.YotpoIconInMenu}}" stepKey="checkYotpoAppearsInTheMenu"/>

  <!-- open Yotpo main menu store configuration menu -->
  <click selector="{{AdminLoginToYotpo.YotpoMenu}}" stepKey="ClickOnYotpoMenu"/>
  <waitForPageLoad stepKey="waitForProductPageLoad"/>
  <!-- open Yotpo's sub menu 'Reviews and Visual Marketing' store configuration menu -->
  <click selector="{{AdminLoginToYotpo.ReviewsAndVisualMarketing}}" stepKey="ClickOnReviewsMenu"/>
  <waitForPageLoad stepKey="waitForClickOnReviewsMenu"/>

  <!-- enable Yotpo plugin -->
  <selectOption userInput="1" selector="{{AdminLoginToYotpo.YotpoEnabled}}" stepKey="setYotpoAsActive"/>

  <!-- set Yotpo credentials -->
  <fillField userInput="{{_CREDS.yotpo_app_key}}" selector="{{AdminLoginToYotpo.yotpoAppKey}}" stepKey="fillAppKey"/>
  <fillField userInput="{{_CREDS.yotpo_secret}}" selector="{{AdminLoginToYotpo.yotpoSecret}}" stepKey="fillSecret"/>

  <!-- save Yotpo configuration -->
  <click selector="{{AdminLoginToYotpo.SaveConfiguration}}" stepKey="ClickOnSaveConfig"/>

  <!-- Check that configuraion was saved -->
  <waitForPageLoad stepKey="waitForSaveConfig"/>
  <seeElement selector="{{AdminLoginToYotpo.SavedConfiguration}}" stepKey="checkConfigurationSaved"/>
</actionGroup>
</actionGroups>


